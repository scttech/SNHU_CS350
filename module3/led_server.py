import timefrom enum import Enum, autoimport serialimport RPi.GPIO as GPIOPIN = 18SERIAL_PORT = "/dev/ttyS0"BAUD_RATE = 115200TIMEOUT_SEC = 1.0class LedState(Enum):    OFF = auto()    BLINK = auto()    QUIT = auto()def init_serial() -> serial.Serial:    return serial.Serial(        port=SERIAL_PORT,        baudrate=BAUD_RATE,        parity=serial.PARITY_NONE,        stopbits=serial.STOPBITS_ONE,        bytesize=serial.EIGHTBITS,        timeout=TIMEOUT_SEC,    )def init_gpio() -> None:    GPIO.setwarnings(False)    GPIO.setmode(GPIO.BCM)    GPIO.setup(PIN, GPIO.OUT)    GPIO.output(PIN, False)def handle_command(command: str, current_state: LedState) -> LedState:    """    Return the next state given a command string or the current state if the    command is unrecognized.    """    match command:        case "blink":            return LedState.BLINK        case "off":            return LedState.OFF        case "quit":            return LedState.QUIT        case _:            return current_statedef machine_state(state: LedState) -> None:    """Drive GPIO according to the current state."""    match state:        case LedState.BLINK:            GPIO.output(PIN, True)            time.sleep(0.5)            GPIO.output(PIN, False)            time.sleep(0.5)        case LedState.OFF:            GPIO.output(PIN, False)        case LedState.QUIT:            GPIO.output(PIN, False)def main() -> None:    init_gpio()    state = LedState.OFF    try:        with init_serial() as ser:            while state is not LedState.QUIT:                raw = ser.readline()                command = raw.decode("utf-8", errors="ignore").strip().lower()                state = handle_command(command, state)                machine_state(state)                if state is LedState.QUIT:                    print("Exiting LED server")    except KeyboardInterrupt:        pass    finally:        GPIO.output(PIN, False)        GPIO.cleanup()if __name__ == "__main__":    main()